

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon.png">
  <link rel="icon" href="/img/icon.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#ac9343">
  <meta name="author" content="ZoeKyHein">
  <meta name="keywords" content="">
  
    <meta name="description" content="æ¬¢è¿æ¥åˆ° Golangç³»åˆ—æ•™ç¨‹ çš„ç¬¬24ç¯‡æ•™ç¨‹ã€‚ ä»€ä¹ˆæ˜¯ selectï¼Ÿselect è¯­å¥ç”¨äºåœ¨å¤šä¸ªå‘é€&#x2F;æ¥æ”¶é€šé“æ“ä½œä¸­è¿›è¡Œé€‰æ‹©ã€‚select è¯­å¥ä¼šé˜»å¡ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªå‘é€&#x2F;æ¥æ”¶æ“ä½œå°±ç»ªã€‚å¦‚æœå¤šä¸ªæ“ä½œåŒæ—¶å°±ç»ªï¼Œåˆ™ä¼šéšæœºé€‰æ‹©å…¶ä¸­ä¸€ä¸ªã€‚å…¶è¯­æ³•ç±»ä¼¼äº switchï¼Œåªæ˜¯æ¯ä¸ª case è¯­å¥éƒ½å°†æ˜¯ä¸€ä¸ªé€šé“æ“ä½œã€‚è®©æˆ‘ä»¬ç›´æ¥é€šè¿‡ä¸€äº›ä»£ç æ¥æ›´å¥½åœ°ç†è§£ã€‚ ç¤ºä¾‹package main  imp">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€GolangBotã€‘24-Select">
<meta property="og:url" content="https://zoekyhein.github.io/%E3%80%90GolangBot%E3%80%9124-Select/index.html">
<meta property="og:site_name" content="ä¼ ç«ç¥­ç¥€åœº">
<meta property="og:description" content="æ¬¢è¿æ¥åˆ° Golangç³»åˆ—æ•™ç¨‹ çš„ç¬¬24ç¯‡æ•™ç¨‹ã€‚ ä»€ä¹ˆæ˜¯ selectï¼Ÿselect è¯­å¥ç”¨äºåœ¨å¤šä¸ªå‘é€&#x2F;æ¥æ”¶é€šé“æ“ä½œä¸­è¿›è¡Œé€‰æ‹©ã€‚select è¯­å¥ä¼šé˜»å¡ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªå‘é€&#x2F;æ¥æ”¶æ“ä½œå°±ç»ªã€‚å¦‚æœå¤šä¸ªæ“ä½œåŒæ—¶å°±ç»ªï¼Œåˆ™ä¼šéšæœºé€‰æ‹©å…¶ä¸­ä¸€ä¸ªã€‚å…¶è¯­æ³•ç±»ä¼¼äº switchï¼Œåªæ˜¯æ¯ä¸ª case è¯­å¥éƒ½å°†æ˜¯ä¸€ä¸ªé€šé“æ“ä½œã€‚è®©æˆ‘ä»¬ç›´æ¥é€šè¿‡ä¸€äº›ä»£ç æ¥æ›´å¥½åœ°ç†è§£ã€‚ ç¤ºä¾‹package main  imp">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-12-25T17:54:32.000Z">
<meta property="article:modified_time" content="2025-01-23T07:44:45.569Z">
<meta property="article:author" content="ZoeKyHein">
<meta property="article:tag" content="Golang">
<meta property="article:tag" content="æ•™ç¨‹">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>ã€GolangBotã€‘24-Select - ä¼ ç«ç¥­ç¥€åœº</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"zoekyhein.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"ğŸ’¥","loop":false,"scope":["home"]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>ä¼ ç«ç¥­ç¥€åœº</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/golangbot" target="_self">
                <i class="iconfont icon-book"></i>
                <span>Goæ•™ç¨‹</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/sunKnight.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">ã€GolangBotã€‘24-Select</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-12-25 17:54" pubdate>
          2024å¹´12æœˆ25æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          1.5k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          13 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> æ¬¡
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">ã€GolangBotã€‘24-Select</h1>
            
            
              <div class="markdown-body">
                
                <p>æ¬¢è¿æ¥åˆ° <a href="../golangbot/">Golangç³»åˆ—æ•™ç¨‹</a> çš„ç¬¬24ç¯‡æ•™ç¨‹ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯-selectï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-selectï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ selectï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ <em>select</em>ï¼Ÿ</h3><p><code>select</code> è¯­å¥ç”¨äºåœ¨å¤šä¸ªå‘é€&#x2F;æ¥æ”¶é€šé“æ“ä½œä¸­è¿›è¡Œé€‰æ‹©ã€‚select è¯­å¥ä¼šé˜»å¡ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªå‘é€&#x2F;æ¥æ”¶æ“ä½œå°±ç»ªã€‚å¦‚æœå¤šä¸ªæ“ä½œåŒæ—¶å°±ç»ªï¼Œåˆ™ä¼šéšæœºé€‰æ‹©å…¶ä¸­ä¸€ä¸ªã€‚å…¶è¯­æ³•ç±»ä¼¼äº <code>switch</code>ï¼Œåªæ˜¯æ¯ä¸ª case è¯­å¥éƒ½å°†æ˜¯ä¸€ä¸ªé€šé“æ“ä½œã€‚è®©æˆ‘ä»¬ç›´æ¥é€šè¿‡ä¸€äº›ä»£ç æ¥æ›´å¥½åœ°ç†è§£ã€‚</p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;fmt&quot;</span>
	<span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">server1</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	time.Sleep(<span class="hljs-number">6</span> * time.Second)
	ch &lt;- <span class="hljs-string">&quot;from server1&quot;</span>
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">server2</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	time.Sleep(<span class="hljs-number">3</span> * time.Second)
	ch &lt;- <span class="hljs-string">&quot;from server2&quot;</span>

&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	output1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	output2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">go</span> server1(output1)
	<span class="hljs-keyword">go</span> server2(output2)
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> s1 := &lt;-output1:
		fmt.Println(s1)
	<span class="hljs-keyword">case</span> s2 := &lt;-output2:
		fmt.Println(s2)
	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/3_yaJSoSpG">åœ¨ playground ä¸­è¿è¡Œ</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œç¬¬8è¡Œçš„ <code>server1</code> å‡½æ•°ä¼‘çœ 6ç§’ï¼Œç„¶åå°†æ–‡æœ¬ <em>from server1</em> å†™å…¥é€šé“ <code>ch</code>ã€‚ç¬¬12è¡Œçš„ <code>server2</code> å‡½æ•°ä¼‘çœ 3ç§’ï¼Œç„¶åå°† <em>from server2</em> å†™å…¥é€šé“ <code>ch</code>ã€‚</p>
<p>main å‡½æ•°åœ¨ç¬¬20è¡Œå’Œç¬¬21è¡Œåˆ†åˆ«è°ƒç”¨ <code>server1</code> å’Œ <code>server2</code> Goroutineã€‚</p>
<p>åœ¨ç¬¬22è¡Œï¼Œæ§åˆ¶æµåˆ°è¾¾ <code>select</code> è¯­å¥ã€‚select è¯­å¥ä¼šé˜»å¡ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ª case å°±ç»ªã€‚åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œserver1 Goroutine åœ¨6ç§’åå†™å…¥ <code>output1</code> é€šé“ï¼Œè€Œ server2 åœ¨3ç§’åå†™å…¥ <code>output2</code> é€šé“ã€‚å› æ­¤ï¼Œselect è¯­å¥å°†é˜»å¡3ç§’ï¼Œç­‰å¾… server2 Goroutine å†™å…¥ <code>output2</code> é€šé“ã€‚3ç§’åï¼Œç¨‹åºæ‰“å°ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">from server2</code></pre></div>

<p>ç„¶åç»ˆæ­¢ã€‚</p>
<h3 id="select-çš„å®é™…ç”¨é€”"><a href="#select-çš„å®é™…ç”¨é€”" class="headerlink" title="select çš„å®é™…ç”¨é€”"></a>select çš„å®é™…ç”¨é€”</h3><p>å°†ä¸Šè¿°ç¨‹åºä¸­çš„å‡½æ•°å‘½åä¸º <code>server1</code> å’Œ <code>server2</code> çš„åŸå› æ˜¯ä¸ºäº†è¯´æ˜ <em>select</em> çš„å®é™…ç”¨é€”ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå…³é”®ä»»åŠ¡åº”ç”¨ç¨‹åºï¼Œéœ€è¦å°½å¿«å‘ç”¨æˆ·è¿”å›è¾“å‡ºã€‚è¯¥åº”ç”¨ç¨‹åºçš„æ•°æ®åº“å·²å¤åˆ¶å¹¶å­˜å‚¨åœ¨ä¸–ç•Œå„åœ°çš„ä¸åŒæœåŠ¡å™¨ä¸­ã€‚å‡è®¾å‡½æ•° <code>server1</code> å’Œ <code>server2</code> å®é™…ä¸Šæ˜¯åœ¨ä¸ä¸¤ä¸ªè¿™æ ·çš„æœåŠ¡å™¨é€šä¿¡ã€‚æ¯ä¸ªæœåŠ¡å™¨çš„å“åº”æ—¶é—´å–å†³äºå„è‡ªçš„è´Ÿè½½å’Œç½‘ç»œå»¶è¿Ÿã€‚æˆ‘ä»¬å‘ä¸¤ä¸ªæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç„¶åä½¿ç”¨ <code>select</code> è¯­å¥åœ¨ç›¸åº”çš„é€šé“ä¸Šç­‰å¾…å“åº”ã€‚select ä¼šé€‰æ‹©æœ€å…ˆå“åº”çš„æœåŠ¡å™¨ï¼Œè€Œå¿½ç•¥å¦ä¸€ä¸ªå“åº”ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘å¤šä¸ªæœåŠ¡å™¨å‘é€ç›¸åŒçš„è¯·æ±‚ï¼Œå¹¶å‘ç”¨æˆ·è¿”å›æœ€å¿«çš„å“åº” :)ã€‚</p>
<h3 id="é»˜è®¤åˆ†æ”¯"><a href="#é»˜è®¤åˆ†æ”¯" class="headerlink" title="é»˜è®¤åˆ†æ”¯"></a>é»˜è®¤åˆ†æ”¯</h3><p>select è¯­å¥ä¸­çš„é»˜è®¤åˆ†æ”¯åœ¨æ²¡æœ‰å…¶ä»– case å°±ç»ªæ—¶æ‰§è¡Œã€‚è¿™é€šå¸¸ç”¨äºé˜²æ­¢ select è¯­å¥é˜»å¡ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;fmt&quot;</span>
	<span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">process</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	time.Sleep(<span class="hljs-number">10500</span> * time.Millisecond)
	ch &lt;- <span class="hljs-string">&quot;process successful&quot;</span>
&#125;

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">go</span> process(ch)
	<span class="hljs-keyword">for</span> &#123;
		time.Sleep(<span class="hljs-number">1000</span> * time.Millisecond)
		<span class="hljs-keyword">select</span> &#123;
		<span class="hljs-keyword">case</span> v := &lt;-ch:
			fmt.Println(<span class="hljs-string">&quot;received value: &quot;</span>, v)
			<span class="hljs-keyword">return</span>
		<span class="hljs-keyword">default</span>:
			fmt.Println(<span class="hljs-string">&quot;no value received&quot;</span>)
		&#125;
	&#125;

&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/8xS5r9g1Uy">åœ¨ playground ä¸­è¿è¡Œ</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œç¬¬8è¡Œçš„ <code>process</code> å‡½æ•°ä¼‘çœ 10500æ¯«ç§’ï¼ˆ10.5ç§’ï¼‰ï¼Œç„¶åå°† <code>process successful</code> å†™å…¥ <code>ch</code> é€šé“ã€‚è¿™ä¸ªå‡½æ•°åœ¨ç¨‹åºçš„ç¬¬15è¡Œè¢«å¹¶å‘è°ƒç”¨ã€‚</p>
<p>åœ¨å¹¶å‘è°ƒç”¨ process Goroutine åï¼Œmain Goroutine ä¸­å¯åŠ¨äº†ä¸€ä¸ªæ— é™ for å¾ªç¯ã€‚æ— é™å¾ªç¯åœ¨æ¯æ¬¡è¿­ä»£å¼€å§‹æ—¶ä¼‘çœ 1000æ¯«ç§’ï¼ˆ1ç§’ï¼‰ï¼Œç„¶åæ‰§è¡Œ select æ“ä½œã€‚åœ¨å‰10500æ¯«ç§’æœŸé—´ï¼Œselect è¯­å¥çš„ç¬¬ä¸€ä¸ª caseï¼ˆå³ <code>case v := &lt;-ch:</code>ï¼‰ä¸ä¼šå°±ç»ªï¼Œå› ä¸º process Goroutine åªä¼šåœ¨10500æ¯«ç§’åæ‰å‘ ch é€šé“å†™å…¥ã€‚å› æ­¤ï¼Œåœ¨æ­¤æœŸé—´å°†æ‰§è¡Œ <code>default</code> åˆ†æ”¯ï¼Œç¨‹åºå°†æ‰“å°10æ¬¡ <code>no value received</code>ã€‚</p>
<p>10.5ç§’åï¼Œprocess Goroutine åœ¨ç¬¬10è¡Œå°† <code>process successful</code> å†™å…¥ chã€‚ç°åœ¨ select è¯­å¥çš„ç¬¬ä¸€ä¸ª case å°†è¢«æ‰§è¡Œï¼Œç¨‹åºå°†æ‰“å° <code>received value: process successful</code>ï¼Œç„¶åç»ˆæ­¢ã€‚è¿™ä¸ªç¨‹åºçš„è¾“å‡ºå°†æ˜¯ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">no value received
no value received
no value received
no value received
no value received
no value received
no value received
no value received
no value received
no value received
received value:  process successful</code></pre></div>

<h3 id="æ­»é”å’Œé»˜è®¤åˆ†æ”¯"><a href="#æ­»é”å’Œé»˜è®¤åˆ†æ”¯" class="headerlink" title="æ­»é”å’Œé»˜è®¤åˆ†æ”¯"></a>æ­»é”å’Œé»˜è®¤åˆ†æ”¯</h3><div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> &lt;-ch:
	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/za0GZ4o7HH">åœ¨ playground ä¸­è¿è¡Œ</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬åœ¨ç¬¬4è¡Œåˆ›å»ºäº†ä¸€ä¸ªé€šé“ <code>ch</code>ã€‚æˆ‘ä»¬å°è¯•åœ¨ç¬¬6è¡Œçš„ select ä¸­ä»è¿™ä¸ªé€šé“è¯»å–ã€‚ç”±äºæ²¡æœ‰å…¶ä»– Goroutine å‘è¿™ä¸ªé€šé“å†™å…¥ï¼Œselect è¯­å¥å°†æ°¸è¿œé˜»å¡ï¼Œå› æ­¤ä¼šå¯¼è‡´æ­»é”ã€‚è¿™ä¸ªç¨‹åºå°†åœ¨è¿è¡Œæ—¶å‡ºç° panicï¼Œå¹¶æ˜¾ç¤ºä»¥ä¸‹æ¶ˆæ¯ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">fatal error: all goroutines are asleep - deadlock!

goroutine 1 [chan receive]:
main.main()
	/tmp/sandbox627739431/prog.go:6 +0x4d</code></pre></div>

<p>å¦‚æœå­˜åœ¨é»˜è®¤åˆ†æ”¯ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿè¿™ç§æ­»é”ï¼Œå› ä¸ºå½“æ²¡æœ‰å…¶ä»– case å°±ç»ªæ—¶å°†æ‰§è¡Œé»˜è®¤åˆ†æ”¯ã€‚ä¸‹é¢æ˜¯æ·»åŠ äº†é»˜è®¤åˆ†æ”¯çš„ç¨‹åºé‡å†™ç‰ˆæœ¬ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> &lt;-ch:
	<span class="hljs-keyword">default</span>:
		fmt.Println(<span class="hljs-string">&quot;default case executed&quot;</span>)
	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/Pxsh_KlFUw">åœ¨ playground ä¸­è¿è¡Œ</a></p>
<p>ä¸Šé¢çš„ç¨‹åºå°†æ‰“å°ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">default case executed</code></pre></div>

<p>åŒæ ·ï¼Œå³ä½¿ select åªæœ‰ <code>nil</code> é€šé“ï¼Œé»˜è®¤åˆ†æ”¯ä¹Ÿä¼šè¢«æ‰§è¡Œã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	<span class="hljs-keyword">var</span> ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> v := &lt;-ch:
		fmt.Println(<span class="hljs-string">&quot;received value&quot;</span>, v)
	<span class="hljs-keyword">default</span>:
		fmt.Println(<span class="hljs-string">&quot;default case executed&quot;</span>)

	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/IKmGpN61m1">åœ¨ playground ä¸­è¿è¡Œ</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œ<code>ch</code> æ˜¯ <code>nil</code>ï¼Œæˆ‘ä»¬è¯•å›¾åœ¨ç¬¬8è¡Œçš„ select ä¸­ä» <code>ch</code> è¯»å–ã€‚å¦‚æœæ²¡æœ‰ <code>default</code> åˆ†æ”¯ï¼Œ<code>select</code> å°†æ°¸è¿œé˜»å¡å¹¶å¯¼è‡´æ­»é”ã€‚ç”±äºæˆ‘ä»¬åœ¨ select ä¸­æœ‰é»˜è®¤åˆ†æ”¯ï¼Œå®ƒå°†è¢«æ‰§è¡Œï¼Œç¨‹åºå°†æ‰“å°ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">default case executed</code></pre></div>

<h3 id="éšæœºé€‰æ‹©"><a href="#éšæœºé€‰æ‹©" class="headerlink" title="éšæœºé€‰æ‹©"></a>éšæœºé€‰æ‹©</h3><p>å½“ <code>select</code> è¯­å¥ä¸­æœ‰å¤šä¸ª case å°±ç»ªæ—¶ï¼Œå°†éšæœºæ‰§è¡Œå…¶ä¸­ä¸€ä¸ªã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;fmt&quot;</span>
	<span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">server1</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	ch &lt;- <span class="hljs-string">&quot;from server1&quot;</span>
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">server2</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	ch &lt;- <span class="hljs-string">&quot;from server2&quot;</span>

&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	output1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	output2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">go</span> server1(output1)
	<span class="hljs-keyword">go</span> server2(output2)
	time.Sleep(<span class="hljs-number">1</span> * time.Second)
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> s1 := &lt;-output1:
		fmt.Println(s1)
	<span class="hljs-keyword">case</span> s2 := &lt;-output2:
		fmt.Println(s2)
	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/vJ6VhVl9YY">åœ¨ playground ä¸­è¿è¡Œ</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œserver1 å’Œ server2 goroutine åˆ†åˆ«åœ¨ç¬¬18è¡Œå’Œç¬¬19è¡Œè¢«è°ƒç”¨ã€‚ç„¶å main ç¨‹åºåœ¨ç¬¬20è¡Œä¼‘çœ 1ç§’ã€‚å½“æ§åˆ¶æµåˆ°è¾¾ç¬¬21è¡Œçš„ select è¯­å¥æ—¶ï¼Œserver1 å·²ç»å°† <code>from server1</code> å†™å…¥ <code>output1</code> é€šé“ï¼Œserver2 å·²ç»å°† <code>from server2</code> å†™å…¥ <code>output2</code> é€šé“ï¼Œå› æ­¤ select è¯­å¥çš„ä¸¤ä¸ª case éƒ½å‡†å¤‡å°±ç»ªå¯ä»¥æ‰§è¡Œã€‚å¦‚æœå¤šæ¬¡è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œè¾“å‡ºå°†åœ¨ <code>from server1</code> å’Œ <code>from server2</code> ä¹‹é—´éšæœºå˜åŒ–ï¼Œå…·ä½“å–å†³äºéšæœºé€‰æ‹©çš„ caseã€‚</p>
<p>è¯·åœ¨æœ¬åœ°ç³»ç»Ÿä¸­è¿è¡Œæ­¤ç¨‹åºä»¥è·å¾—è¿™ç§éšæœºæ€§ã€‚å¦‚æœåœ¨ playground ä¸­è¿è¡Œæ­¤ç¨‹åºï¼Œå®ƒå°†æ‰“å°ç›¸åŒçš„è¾“å‡ºï¼Œå› ä¸º playground æ˜¯ç¡®å®šæ€§çš„ã€‚</p>
<h3 id="æ³¨æ„äº‹é¡¹-ç©º-select"><a href="#æ³¨æ„äº‹é¡¹-ç©º-select" class="headerlink" title="æ³¨æ„äº‹é¡¹ - ç©º select"></a>æ³¨æ„äº‹é¡¹ - ç©º select</h3><div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	<span class="hljs-keyword">select</span> &#123;&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/u8hErIxgxs">åœ¨ playground ä¸­è¿è¡Œ</a></p>
<p>ä½ è®¤ä¸ºä¸Šé¢ç¨‹åºçš„è¾“å‡ºä¼šæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æˆ‘ä»¬çŸ¥é“ select è¯­å¥å°†é˜»å¡ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ª case è¢«æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œselect è¯­å¥æ²¡æœ‰ä»»ä½• caseï¼Œå› æ­¤å®ƒå°†æ°¸è¿œé˜»å¡ï¼Œå¯¼è‡´æ­»é”ã€‚è¿™ä¸ªç¨‹åºå°†å‡ºç° panicï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">fatal error: all goroutines are asleep - deadlock!

goroutine 1 [select (no cases)]:
main.main()
	/tmp/sandbox246983342/prog.go:4 +0x25</code></pre></div>


<p><strong>ä¸‹ä¸€ç¯‡æ•™ç¨‹ - <a target="_blank" rel="noopener" href="https://golangbot.com/mutex/">Mutex</a></strong></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/" class="category-chain-item">å­¦ä¹ å¿ƒå¾—</a>
  
  
    <span>></span>
    
  <a href="/categories/%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/GolangBot/" class="category-chain-item">GolangBot</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Golang/" class="print-no-link">#Golang</a>
      
        <a href="/tags/%E6%95%99%E7%A8%8B/" class="print-no-link">#æ•™ç¨‹</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>ã€GolangBotã€‘24-Select</div>
      <div>https://zoekyhein.github.io/ã€GolangBotã€‘24-Select/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>ZoeKyHein</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2024å¹´12æœˆ25æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/%E3%80%90GolangBot%E3%80%9125-%E4%BA%92%E6%96%A5%E9%94%81/" title="ã€GolangBotã€‘25-äº’æ–¥é”">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ã€GolangBotã€‘25-äº’æ–¥é”</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/%E3%80%90GolangBot%E3%80%9123-%E7%BC%93%E5%86%B2%E9%80%9A%E9%81%93%E4%B8%8E%E5%B7%A5%E4%BD%9C%E6%B1%A0/" title="ã€GolangBotã€‘23-ç¼“å†²é€šé“ä¸å·¥ä½œæ± ">
                        <span class="hidden-mobile">ã€GolangBotã€‘23-ç¼“å†²é€šé“ä¸å·¥ä½œæ± </span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
