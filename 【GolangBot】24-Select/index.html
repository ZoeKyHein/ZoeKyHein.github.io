

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon.png">
  <link rel="icon" href="/img/icon.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#ac9343">
  <meta name="author" content="ZoeKyHein">
  <meta name="keywords" content="">
  
    <meta name="description" content="欢迎来到 Golang系列教程 的第24篇教程。 什么是 select？select 语句用于在多个发送&#x2F;接收通道操作中进行选择。select 语句会阻塞，直到其中一个发送&#x2F;接收操作就绪。如果多个操作同时就绪，则会随机选择其中一个。其语法类似于 switch，只是每个 case 语句都将是一个通道操作。让我们直接通过一些代码来更好地理解。 示例package main  imp">
<meta property="og:type" content="article">
<meta property="og:title" content="【GolangBot】24-Select">
<meta property="og:url" content="https://zoekyhein.github.io/%E3%80%90GolangBot%E3%80%9124-Select/index.html">
<meta property="og:site_name" content="传火祭祀场">
<meta property="og:description" content="欢迎来到 Golang系列教程 的第24篇教程。 什么是 select？select 语句用于在多个发送&#x2F;接收通道操作中进行选择。select 语句会阻塞，直到其中一个发送&#x2F;接收操作就绪。如果多个操作同时就绪，则会随机选择其中一个。其语法类似于 switch，只是每个 case 语句都将是一个通道操作。让我们直接通过一些代码来更好地理解。 示例package main  imp">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-12-25T17:54:32.000Z">
<meta property="article:modified_time" content="2025-01-23T07:44:45.569Z">
<meta property="article:author" content="ZoeKyHein">
<meta property="article:tag" content="Golang">
<meta property="article:tag" content="教程">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>【GolangBot】24-Select - 传火祭祀场</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"zoekyhein.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"💥","loop":false,"scope":["home"]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>传火祭祀场</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/golangbot" target="_self">
                <i class="iconfont icon-book"></i>
                <span>Go教程</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/sunKnight.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">【GolangBot】24-Select</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-12-25 17:54" pubdate>
          2024年12月25日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          1.5k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          13 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">【GolangBot】24-Select</h1>
            
            
              <div class="markdown-body">
                
                <p>欢迎来到 <a href="../golangbot/">Golang系列教程</a> 的第24篇教程。</p>
<h3 id="什么是-select？"><a href="#什么是-select？" class="headerlink" title="什么是 select？"></a>什么是 <em>select</em>？</h3><p><code>select</code> 语句用于在多个发送&#x2F;接收通道操作中进行选择。select 语句会阻塞，直到其中一个发送&#x2F;接收操作就绪。如果多个操作同时就绪，则会随机选择其中一个。其语法类似于 <code>switch</code>，只是每个 case 语句都将是一个通道操作。让我们直接通过一些代码来更好地理解。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;fmt&quot;</span>
	<span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">server1</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	time.Sleep(<span class="hljs-number">6</span> * time.Second)
	ch &lt;- <span class="hljs-string">&quot;from server1&quot;</span>
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">server2</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	time.Sleep(<span class="hljs-number">3</span> * time.Second)
	ch &lt;- <span class="hljs-string">&quot;from server2&quot;</span>

&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	output1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	output2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">go</span> server1(output1)
	<span class="hljs-keyword">go</span> server2(output2)
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> s1 := &lt;-output1:
		fmt.Println(s1)
	<span class="hljs-keyword">case</span> s2 := &lt;-output2:
		fmt.Println(s2)
	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/3_yaJSoSpG">在 playground 中运行</a></p>
<p>在上面的程序中，第8行的 <code>server1</code> 函数休眠6秒，然后将文本 <em>from server1</em> 写入通道 <code>ch</code>。第12行的 <code>server2</code> 函数休眠3秒，然后将 <em>from server2</em> 写入通道 <code>ch</code>。</p>
<p>main 函数在第20行和第21行分别调用 <code>server1</code> 和 <code>server2</code> Goroutine。</p>
<p>在第22行，控制流到达 <code>select</code> 语句。select 语句会阻塞，直到其中一个 case 就绪。在我们的程序中，server1 Goroutine 在6秒后写入 <code>output1</code> 通道，而 server2 在3秒后写入 <code>output2</code> 通道。因此，select 语句将阻塞3秒，等待 server2 Goroutine 写入 <code>output2</code> 通道。3秒后，程序打印：</p>
<div class="code-wrapper"><pre><code class="hljs fallback">from server2</code></pre></div>

<p>然后终止。</p>
<h3 id="select-的实际用途"><a href="#select-的实际用途" class="headerlink" title="select 的实际用途"></a>select 的实际用途</h3><p>将上述程序中的函数命名为 <code>server1</code> 和 <code>server2</code> 的原因是为了说明 <em>select</em> 的实际用途。</p>
<p>假设我们有一个关键任务应用程序，需要尽快向用户返回输出。该应用程序的数据库已复制并存储在世界各地的不同服务器中。假设函数 <code>server1</code> 和 <code>server2</code> 实际上是在与两个这样的服务器通信。每个服务器的响应时间取决于各自的负载和网络延迟。我们向两个服务器发送请求，然后使用 <code>select</code> 语句在相应的通道上等待响应。select 会选择最先响应的服务器，而忽略另一个响应。这样，我们就可以向多个服务器发送相同的请求，并向用户返回最快的响应 :)。</p>
<h3 id="默认分支"><a href="#默认分支" class="headerlink" title="默认分支"></a>默认分支</h3><p>select 语句中的默认分支在没有其他 case 就绪时执行。这通常用于防止 select 语句阻塞。</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;fmt&quot;</span>
	<span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">process</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	time.Sleep(<span class="hljs-number">10500</span> * time.Millisecond)
	ch &lt;- <span class="hljs-string">&quot;process successful&quot;</span>
&#125;

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">go</span> process(ch)
	<span class="hljs-keyword">for</span> &#123;
		time.Sleep(<span class="hljs-number">1000</span> * time.Millisecond)
		<span class="hljs-keyword">select</span> &#123;
		<span class="hljs-keyword">case</span> v := &lt;-ch:
			fmt.Println(<span class="hljs-string">&quot;received value: &quot;</span>, v)
			<span class="hljs-keyword">return</span>
		<span class="hljs-keyword">default</span>:
			fmt.Println(<span class="hljs-string">&quot;no value received&quot;</span>)
		&#125;
	&#125;

&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/8xS5r9g1Uy">在 playground 中运行</a></p>
<p>在上面的程序中，第8行的 <code>process</code> 函数休眠10500毫秒（10.5秒），然后将 <code>process successful</code> 写入 <code>ch</code> 通道。这个函数在程序的第15行被并发调用。</p>
<p>在并发调用 process Goroutine 后，main Goroutine 中启动了一个无限 for 循环。无限循环在每次迭代开始时休眠1000毫秒（1秒），然后执行 select 操作。在前10500毫秒期间，select 语句的第一个 case（即 <code>case v := &lt;-ch:</code>）不会就绪，因为 process Goroutine 只会在10500毫秒后才向 ch 通道写入。因此，在此期间将执行 <code>default</code> 分支，程序将打印10次 <code>no value received</code>。</p>
<p>10.5秒后，process Goroutine 在第10行将 <code>process successful</code> 写入 ch。现在 select 语句的第一个 case 将被执行，程序将打印 <code>received value: process successful</code>，然后终止。这个程序的输出将是：</p>
<div class="code-wrapper"><pre><code class="hljs fallback">no value received
no value received
no value received
no value received
no value received
no value received
no value received
no value received
no value received
no value received
received value:  process successful</code></pre></div>

<h3 id="死锁和默认分支"><a href="#死锁和默认分支" class="headerlink" title="死锁和默认分支"></a>死锁和默认分支</h3><div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> &lt;-ch:
	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/za0GZ4o7HH">在 playground 中运行</a></p>
<p>在上面的程序中，我们在第4行创建了一个通道 <code>ch</code>。我们尝试在第6行的 select 中从这个通道读取。由于没有其他 Goroutine 向这个通道写入，select 语句将永远阻塞，因此会导致死锁。这个程序将在运行时出现 panic，并显示以下消息：</p>
<div class="code-wrapper"><pre><code class="hljs fallback">fatal error: all goroutines are asleep - deadlock!

goroutine 1 [chan receive]:
main.main()
	/tmp/sandbox627739431/prog.go:6 +0x4d</code></pre></div>

<p>如果存在默认分支，则不会发生这种死锁，因为当没有其他 case 就绪时将执行默认分支。下面是添加了默认分支的程序重写版本。</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> &lt;-ch:
	<span class="hljs-keyword">default</span>:
		fmt.Println(<span class="hljs-string">&quot;default case executed&quot;</span>)
	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/Pxsh_KlFUw">在 playground 中运行</a></p>
<p>上面的程序将打印：</p>
<div class="code-wrapper"><pre><code class="hljs fallback">default case executed</code></pre></div>

<p>同样，即使 select 只有 <code>nil</code> 通道，默认分支也会被执行。</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	<span class="hljs-keyword">var</span> ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> v := &lt;-ch:
		fmt.Println(<span class="hljs-string">&quot;received value&quot;</span>, v)
	<span class="hljs-keyword">default</span>:
		fmt.Println(<span class="hljs-string">&quot;default case executed&quot;</span>)

	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/IKmGpN61m1">在 playground 中运行</a></p>
<p>在上面的程序中，<code>ch</code> 是 <code>nil</code>，我们试图在第8行的 select 中从 <code>ch</code> 读取。如果没有 <code>default</code> 分支，<code>select</code> 将永远阻塞并导致死锁。由于我们在 select 中有默认分支，它将被执行，程序将打印：</p>
<div class="code-wrapper"><pre><code class="hljs fallback">default case executed</code></pre></div>

<h3 id="随机选择"><a href="#随机选择" class="headerlink" title="随机选择"></a>随机选择</h3><p>当 <code>select</code> 语句中有多个 case 就绪时，将随机执行其中一个。</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;fmt&quot;</span>
	<span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">server1</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	ch &lt;- <span class="hljs-string">&quot;from server1&quot;</span>
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">server2</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> &#123;
	ch &lt;- <span class="hljs-string">&quot;from server2&quot;</span>

&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	output1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	output2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
	<span class="hljs-keyword">go</span> server1(output1)
	<span class="hljs-keyword">go</span> server2(output2)
	time.Sleep(<span class="hljs-number">1</span> * time.Second)
	<span class="hljs-keyword">select</span> &#123;
	<span class="hljs-keyword">case</span> s1 := &lt;-output1:
		fmt.Println(s1)
	<span class="hljs-keyword">case</span> s2 := &lt;-output2:
		fmt.Println(s2)
	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/vJ6VhVl9YY">在 playground 中运行</a></p>
<p>在上面的程序中，server1 和 server2 goroutine 分别在第18行和第19行被调用。然后 main 程序在第20行休眠1秒。当控制流到达第21行的 select 语句时，server1 已经将 <code>from server1</code> 写入 <code>output1</code> 通道，server2 已经将 <code>from server2</code> 写入 <code>output2</code> 通道，因此 select 语句的两个 case 都准备就绪可以执行。如果多次运行这个程序，输出将在 <code>from server1</code> 和 <code>from server2</code> 之间随机变化，具体取决于随机选择的 case。</p>
<p>请在本地系统中运行此程序以获得这种随机性。如果在 playground 中运行此程序，它将打印相同的输出，因为 playground 是确定性的。</p>
<h3 id="注意事项-空-select"><a href="#注意事项-空-select" class="headerlink" title="注意事项 - 空 select"></a>注意事项 - 空 select</h3><div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	<span class="hljs-keyword">select</span> &#123;&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/u8hErIxgxs">在 playground 中运行</a></p>
<p>你认为上面程序的输出会是什么？</p>
<p>我们知道 select 语句将阻塞，直到其中一个 case 被执行。在这种情况下，select 语句没有任何 case，因此它将永远阻塞，导致死锁。这个程序将出现 panic，输出如下：</p>
<div class="code-wrapper"><pre><code class="hljs fallback">fatal error: all goroutines are asleep - deadlock!

goroutine 1 [select (no cases)]:
main.main()
	/tmp/sandbox246983342/prog.go:4 +0x25</code></pre></div>


<p><strong>下一篇教程 - <a target="_blank" rel="noopener" href="https://golangbot.com/mutex/">Mutex</a></strong></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/" class="category-chain-item">学习心得</a>
  
  
    <span>></span>
    
  <a href="/categories/%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/GolangBot/" class="category-chain-item">GolangBot</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Golang/" class="print-no-link">#Golang</a>
      
        <a href="/tags/%E6%95%99%E7%A8%8B/" class="print-no-link">#教程</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>【GolangBot】24-Select</div>
      <div>https://zoekyhein.github.io/【GolangBot】24-Select/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>ZoeKyHein</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年12月25日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/%E3%80%90GolangBot%E3%80%9125-%E4%BA%92%E6%96%A5%E9%94%81/" title="【GolangBot】25-互斥锁">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">【GolangBot】25-互斥锁</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/%E3%80%90GolangBot%E3%80%9123-%E7%BC%93%E5%86%B2%E9%80%9A%E9%81%93%E4%B8%8E%E5%B7%A5%E4%BD%9C%E6%B1%A0/" title="【GolangBot】23-缓冲通道与工作池">
                        <span class="hidden-mobile">【GolangBot】23-缓冲通道与工作池</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
