

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon.png">
  <link rel="icon" href="/img/icon.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#ac9343">
  <meta name="author" content="ZoeKyHein">
  <meta name="keywords" content="">
  
    <meta name="description" content="æ¬¢è¿æ¥åˆ°Golangç³»åˆ—æ•™ç¨‹çš„ç¬¬23è®²ã€‚ ä»€ä¹ˆæ˜¯ç¼“å†²é€šé“ï¼Ÿæˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ•™ç¨‹ä¸­è®¨è®ºçš„æ‰€æœ‰é€šé“åŸºæœ¬ä¸Šéƒ½æ˜¯æ— ç¼“å†²çš„ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨channelsæ•™ç¨‹ä¸­è¯¦ç»†è®¨è®ºçš„é‚£æ ·ï¼Œå¯¹æ— ç¼“å†²é€šé“çš„å‘é€å’Œæ¥æ”¶éƒ½æ˜¯é˜»å¡çš„ã€‚ å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸¦ç¼“å†²çš„é€šé“ã€‚åªæœ‰å½“ç¼“å†²åŒºå·²æ»¡æ—¶ï¼Œå‘ç¼“å†²é€šé“å‘é€æ•°æ®æ‰ä¼šè¢«é˜»å¡ã€‚åŒæ ·ï¼Œåªæœ‰å½“ç¼“å†²åŒºä¸ºç©ºæ—¶ï¼Œä»ç¼“å†²é€šé“æ¥æ”¶æ•°æ®æ‰ä¼šè¢«é˜»å¡ã€‚ é€šè¿‡å‘makeå‡½æ•°ä¼ é€’ä¸€ä¸ªé¢å¤–çš„å®¹é‡å‚æ•°æ¥åˆ›å»ºç¼“å†²é€šé“ï¼Œè¯¥å‚æ•°æŒ‡å®šäº†ç¼“">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€GolangBotã€‘23-ç¼“å†²é€šé“ä¸å·¥ä½œæ± ">
<meta property="og:url" content="https://zoekyhein.github.io/%E3%80%90GolangBot%E3%80%9123-%E7%BC%93%E5%86%B2%E9%80%9A%E9%81%93%E4%B8%8E%E5%B7%A5%E4%BD%9C%E6%B1%A0/index.html">
<meta property="og:site_name" content="ä¼ ç«ç¥­ç¥€åœº">
<meta property="og:description" content="æ¬¢è¿æ¥åˆ°Golangç³»åˆ—æ•™ç¨‹çš„ç¬¬23è®²ã€‚ ä»€ä¹ˆæ˜¯ç¼“å†²é€šé“ï¼Ÿæˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ•™ç¨‹ä¸­è®¨è®ºçš„æ‰€æœ‰é€šé“åŸºæœ¬ä¸Šéƒ½æ˜¯æ— ç¼“å†²çš„ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨channelsæ•™ç¨‹ä¸­è¯¦ç»†è®¨è®ºçš„é‚£æ ·ï¼Œå¯¹æ— ç¼“å†²é€šé“çš„å‘é€å’Œæ¥æ”¶éƒ½æ˜¯é˜»å¡çš„ã€‚ å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸¦ç¼“å†²çš„é€šé“ã€‚åªæœ‰å½“ç¼“å†²åŒºå·²æ»¡æ—¶ï¼Œå‘ç¼“å†²é€šé“å‘é€æ•°æ®æ‰ä¼šè¢«é˜»å¡ã€‚åŒæ ·ï¼Œåªæœ‰å½“ç¼“å†²åŒºä¸ºç©ºæ—¶ï¼Œä»ç¼“å†²é€šé“æ¥æ”¶æ•°æ®æ‰ä¼šè¢«é˜»å¡ã€‚ é€šè¿‡å‘makeå‡½æ•°ä¼ é€’ä¸€ä¸ªé¢å¤–çš„å®¹é‡å‚æ•°æ¥åˆ›å»ºç¼“å†²é€šé“ï¼Œè¯¥å‚æ•°æŒ‡å®šäº†ç¼“">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-12-25T11:54:19.000Z">
<meta property="article:modified_time" content="2025-01-23T07:44:45.569Z">
<meta property="article:author" content="ZoeKyHein">
<meta property="article:tag" content="Golang">
<meta property="article:tag" content="æ•™ç¨‹">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>ã€GolangBotã€‘23-ç¼“å†²é€šé“ä¸å·¥ä½œæ±  - ä¼ ç«ç¥­ç¥€åœº</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"zoekyhein.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"ğŸ’¥","loop":false,"scope":["home"]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>ä¼ ç«ç¥­ç¥€åœº</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/golangbot" target="_self">
                <i class="iconfont icon-book"></i>
                <span>Goæ•™ç¨‹</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/sunKnight.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">ã€GolangBotã€‘23-ç¼“å†²é€šé“ä¸å·¥ä½œæ± </span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-12-25 11:54" pubdate>
          2024å¹´12æœˆ25æ—¥ ä¸­åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.8k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          32 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> æ¬¡
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">ã€GolangBotã€‘23-ç¼“å†²é€šé“ä¸å·¥ä½œæ± </h1>
            
            
              <div class="markdown-body">
                
                <p>æ¬¢è¿æ¥åˆ°<a href="../golangbot/">Golangç³»åˆ—æ•™ç¨‹</a>çš„ç¬¬23è®²ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯ç¼“å†²é€šé“ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç¼“å†²é€šé“ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å†²é€šé“ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç¼“å†²é€šé“ï¼Ÿ</h2><p>æˆ‘ä»¬åœ¨<a href="../%E3%80%90GolangBot%E3%80%9122-Channels">ä¸Šä¸€ç¯‡æ•™ç¨‹</a>ä¸­è®¨è®ºçš„æ‰€æœ‰é€šé“åŸºæœ¬ä¸Šéƒ½æ˜¯æ— ç¼“å†²çš„ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨<a href="../%E3%80%90GolangBot%E3%80%9122-Channels">channelsæ•™ç¨‹</a>ä¸­è¯¦ç»†è®¨è®ºçš„é‚£æ ·ï¼Œå¯¹æ— ç¼“å†²é€šé“çš„å‘é€å’Œæ¥æ”¶éƒ½æ˜¯é˜»å¡çš„ã€‚</p>
<p>å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸¦ç¼“å†²çš„é€šé“ã€‚åªæœ‰å½“ç¼“å†²åŒºå·²æ»¡æ—¶ï¼Œå‘ç¼“å†²é€šé“å‘é€æ•°æ®æ‰ä¼šè¢«é˜»å¡ã€‚åŒæ ·ï¼Œåªæœ‰å½“ç¼“å†²åŒºä¸ºç©ºæ—¶ï¼Œä»ç¼“å†²é€šé“æ¥æ”¶æ•°æ®æ‰ä¼šè¢«é˜»å¡ã€‚</p>
<p>é€šè¿‡å‘<code>make</code>å‡½æ•°ä¼ é€’ä¸€ä¸ªé¢å¤–çš„å®¹é‡å‚æ•°æ¥åˆ›å»ºç¼“å†²é€šé“ï¼Œè¯¥å‚æ•°æŒ‡å®šäº†ç¼“å†²åŒºçš„å¤§å°ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs fallback">ch := make(chan type, capacity)</code></pre></div>

<p>ä¸Šè¿°è¯­æ³•ä¸­çš„<em>capacity</em>å¿…é¡»å¤§äº0æ‰èƒ½ä½¿é€šé“å…·æœ‰ç¼“å†²åŒºã€‚æ— ç¼“å†²é€šé“çš„å®¹é‡é»˜è®¤ä¸º0ï¼Œå› æ­¤æˆ‘ä»¬åœ¨<a href="../%E3%80%90GolangBot%E3%80%9122-Channels">ä¸Šä¸€æ•™ç¨‹</a>ä¸­åˆ›å»ºé€šé“æ—¶çœç•¥äº†å®¹é‡å‚æ•°ã€‚</p>
<p>è®©æˆ‘ä»¬ç¼–å†™ä¸€äº›ä»£ç å¹¶åˆ›å»ºä¸€ä¸ªç¼“å†²é€šé“ã€‚</p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
)


<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>, <span class="hljs-number">2</span>)
    ch &lt;- <span class="hljs-string">&quot;naveen&quot;</span>
    ch &lt;- <span class="hljs-string">&quot;paul&quot;</span>
    fmt.Println(&lt;- ch)
    fmt.Println(&lt;- ch)
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/It-em11etK">Run program in playground</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œç¬¬9è¡Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå®¹é‡ä¸º2çš„ç¼“å†²é€šé“ã€‚ç”±äºé€šé“çš„å®¹é‡ä¸º2ï¼Œæ‰€ä»¥å¯ä»¥å‘é€šé“å†™å…¥2ä¸ªå­—ç¬¦ä¸²è€Œä¸ä¼šè¢«é˜»å¡ã€‚æˆ‘ä»¬åœ¨ç¬¬10è¡Œå’Œç¬¬11è¡Œå‘é€šé“å†™å…¥2ä¸ªå­—ç¬¦ä¸²ï¼Œé€šé“ä¸ä¼šé˜»å¡ã€‚æˆ‘ä»¬åˆ†åˆ«åœ¨ç¬¬12è¡Œå’Œç¬¬13è¡Œè¯»å–å†™å…¥çš„2ä¸ªå­—ç¬¦ä¸²ã€‚è¿™ä¸ªç¨‹åºæ‰“å°ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">naveen
paul</code></pre></div>

<h3 id="å¦ä¸€ä¸ªç¤ºä¾‹"><a href="#å¦ä¸€ä¸ªç¤ºä¾‹" class="headerlink" title="å¦ä¸€ä¸ªç¤ºä¾‹"></a>å¦ä¸€ä¸ªç¤ºä¾‹</h3><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç¼“å†²é€šé“çš„å¦ä¸€ä¸ªç¤ºä¾‹ï¼Œå…¶ä¸­å€¼æ˜¯åœ¨å¹¶å‘Goroutineä¸­å†™å…¥é€šé“ï¼Œå¹¶ä»main Goroutineä¸­è¯»å–ã€‚è¿™ä¸ªç¤ºä¾‹å°†å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£å‘ç¼“å†²é€šé“å†™å…¥æ—¶ä½•æ—¶ä¼šé˜»å¡ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (  
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">write</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &#123;  
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++ &#123;
        ch &lt;- i
        fmt.Println(<span class="hljs-string">&quot;successfully wrote&quot;</span>, i, <span class="hljs-string">&quot;to ch&quot;</span>)
    &#125;
    <span class="hljs-built_in">close</span>(ch)
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">2</span>)
    <span class="hljs-keyword">go</span> write(ch)
    time.Sleep(<span class="hljs-number">2</span> * time.Second)
    <span class="hljs-keyword">for</span> v := <span class="hljs-keyword">range</span> ch &#123;
        fmt.Println(<span class="hljs-string">&quot;read value&quot;</span>, v,<span class="hljs-string">&quot;from ch&quot;</span>)
        time.Sleep(<span class="hljs-number">2</span> * time.Second)

    &#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/bKe5GdgMK9">Run program in playground</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œåœ¨main Goroutineçš„ç¬¬16è¡Œåˆ›å»ºäº†ä¸€ä¸ªå®¹é‡ä¸º<code>2</code>çš„ç¼“å†²é€šé“<code>ch</code>ï¼Œå¹¶åœ¨ç¬¬17è¡Œä¼ é€’ç»™write Goroutineã€‚ç„¶åmain Goroutineä¼‘çœ 2ç§’ã€‚åœ¨æ­¤æœŸé—´ï¼Œwrite Goroutineå¹¶å‘è¿è¡Œã€‚write Goroutineæœ‰ä¸€ä¸ª<code>for</code>å¾ªç¯ï¼Œå°†æ•°å­—0åˆ°4å†™å…¥<code>ch</code>é€šé“ã€‚è¿™ä¸ªç¼“å†²é€šé“çš„å®¹é‡æ˜¯<code>2</code>ï¼Œå› æ­¤write <code>Goroutine</code>å°†èƒ½å¤Ÿç«‹å³å°†å€¼<code>0</code>å’Œ<code>1</code>å†™å…¥<code>ch</code>é€šé“ï¼Œç„¶åå®ƒä¼šé˜»å¡ï¼Œç›´åˆ°è‡³å°‘ä»<code>ch</code>é€šé“è¯»å–ä¸€ä¸ªå€¼ã€‚æ‰€ä»¥è¿™ä¸ªç¨‹åºä¼šç«‹å³æ‰“å°ä»¥ä¸‹2è¡Œã€‚</p>
<div class="code-wrapper"><pre><code class="hljs fallback">successfully wrote 0 to ch
successfully wrote 1 to ch</code></pre></div>

<p>æ‰“å°å®Œä¸Šé¢ä¸¤è¡Œåï¼Œwrite Goroutineä¸­å‘<code>ch</code>é€šé“çš„å†™å…¥ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æœ‰äººä»<code>ch</code>é€šé“è¯»å–ã€‚ç”±äºmain Goroutineåœ¨å¼€å§‹ä»é€šé“è¯»å–ä¹‹å‰ä¼‘çœ 2ç§’ï¼Œæ‰€ä»¥ç¨‹åºåœ¨æ¥ä¸‹æ¥çš„2ç§’å†…ä¸ä¼šæ‰“å°ä»»ä½•å†…å®¹ã€‚main Goroutineåœ¨2ç§’åé†’æ¥ï¼Œå¹¶å¼€å§‹ä½¿ç”¨ç¬¬19è¡Œçš„<code>for range</code>å¾ªç¯ä»<code>ch</code>é€šé“è¯»å–ï¼Œæ‰“å°è¯»å–çš„å€¼ï¼Œç„¶åå†æ¬¡ä¼‘çœ 2ç§’ï¼Œè¿™ä¸ªå¾ªç¯ç»§ç»­ï¼Œç›´åˆ°<code>ch</code>è¢«å…³é—­ã€‚æ‰€ä»¥ç¨‹åºä¼šåœ¨2ç§’åæ‰“å°ä»¥ä¸‹è¡Œï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">read value 0 from ch
successfully wrote 2 to ch</code></pre></div>

<p>è¿™å°†æŒç»­åˆ°æ‰€æœ‰å€¼éƒ½å†™å…¥é€šé“å¹¶åœ¨write Goroutineä¸­å…³é—­ã€‚æœ€ç»ˆè¾“å‡ºå°†æ˜¯ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">successfully wrote 0 to ch
successfully wrote 1 to ch
read value 0 from ch
successfully wrote 2 to ch
read value 1 from ch
successfully wrote 3 to ch
read value 2 from ch
successfully wrote 4 to ch
read value 3 from ch
read value 4 from ch</code></pre></div>

<h3 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h3><div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>, <span class="hljs-number">2</span>)
    ch &lt;- <span class="hljs-string">&quot;naveen&quot;</span>
    ch &lt;- <span class="hljs-string">&quot;paul&quot;</span>
    ch &lt;- <span class="hljs-string">&quot;steve&quot;</span>
    fmt.Println(&lt;-ch)
    fmt.Println(&lt;-ch)
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/FW-LHeH7oD">Run program in playground</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å‘ä¸€ä¸ªå®¹é‡ä¸º2çš„ç¼“å†²é€šé“å†™å…¥3ä¸ªå­—ç¬¦ä¸²ã€‚å½“æ§åˆ¶åˆ°è¾¾ç¬¬11è¡Œçš„ç¬¬ä¸‰æ¬¡å†™å…¥æ—¶ï¼Œå†™å…¥è¢«é˜»å¡ï¼Œå› ä¸ºé€šé“å·²è¶…å‡ºå…¶å®¹é‡ã€‚ç°åœ¨å¿…é¡»æœ‰æŸä¸ªGoroutineä»é€šé“è¯»å–ï¼Œå†™å…¥æ‰èƒ½ç»§ç»­è¿›è¡Œï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰å¹¶å‘çš„ä¾‹ç¨‹ä»è¿™ä¸ªé€šé“è¯»å–ã€‚å› æ­¤ä¼šå‡ºç°<strong>æ­»é”</strong>ï¼Œç¨‹åºä¼šåœ¨è¿è¡Œæ—¶å‡ºç°panicï¼Œå¹¶æ˜¾ç¤ºä»¥ä¸‹æ¶ˆæ¯ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">fatal error: all goroutines are asleep - deadlock!

goroutine 1 [chan send]:
main.main()
	/tmp/sandbox091448810/prog.go:11 +0x8d</code></pre></div>

<h3 id="å…³é—­ç¼“å†²é€šé“"><a href="#å…³é—­ç¼“å†²é€šé“" class="headerlink" title="å…³é—­ç¼“å†²é€šé“"></a>å…³é—­ç¼“å†²é€šé“</h3><p>æˆ‘ä»¬å·²ç»åœ¨<a href="../%E3%80%90GolangBot%E3%80%9123-%E7%BC%93%E5%86%B2%E9%80%9A%E9%81%93%E4%B8%8E%E5%B7%A5%E4%BD%9C%E6%B1%A0/#%E5%85%B3%E9%97%AD%E7%BC%93%E5%86%B2%E9%80%9A%E9%81%93">ä¸Šä¸€æ•™ç¨‹</a>ä¸­è®¨è®ºäº†å…³é—­é€šé“ã€‚é™¤äº†æˆ‘ä»¬åœ¨ä¸Šä¸€æ•™ç¨‹ä¸­å­¦åˆ°çš„å†…å®¹å¤–ï¼Œå…³é—­ç¼“å†²é€šé“æ—¶è¿˜æœ‰ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„ç»†èŠ‚ã€‚</p>
<p>å¯ä»¥ä»å·²å…³é—­çš„ç¼“å†²é€šé“è¯»å–æ•°æ®ã€‚é€šé“å°†è¿”å›å·²å†™å…¥é€šé“çš„æ•°æ®ï¼Œä¸€æ—¦æ‰€æœ‰æ•°æ®éƒ½è¢«è¯»å–ï¼Œå®ƒå°†è¿”å›é€šé“çš„é›¶å€¼ã€‚</p>
<p>è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç¨‹åºæ¥ç†è§£è¿™ä¸€ç‚¹ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">5</span>)
    ch &lt;- <span class="hljs-number">5</span>
    ch &lt;- <span class="hljs-number">6</span>
    <span class="hljs-built_in">close</span>(ch)
    n, open := &lt;-ch 
    fmt.Printf(<span class="hljs-string">&quot;Received: %d, open: %t\n&quot;</span>, n, open)
    n, open = &lt;-ch 
    fmt.Printf(<span class="hljs-string">&quot;Received: %d, open: %t\n&quot;</span>, n, open)
    n, open = &lt;-ch 
    fmt.Printf(<span class="hljs-string">&quot;Received: %d, open: %t\n&quot;</span>, n, open)
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/19cZrsy2X4v">Run program in playground</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬åœ¨ç¬¬8è¡Œåˆ›å»ºäº†ä¸€ä¸ªå®¹é‡ä¸º<code>5</code>çš„ç¼“å†²é€šé“ã€‚ç„¶åæˆ‘ä»¬å‘é€šé“å†™å…¥<code>5</code>å’Œ<code>6</code>ã€‚é€šé“åœ¨ç¬¬11è¡Œä¹‹åå…³é—­ã€‚å³ä½¿é€šé“å·²å…³é—­ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è¯»å–å·²å†™å…¥é€šé“çš„å€¼ã€‚è¿™æ˜¯åœ¨ç¬¬12è¡Œå’Œç¬¬14è¡Œå®Œæˆçš„ã€‚åœ¨ç¬¬12è¡Œï¼Œ<code>n</code>çš„å€¼å°†æ˜¯<code>5</code>ï¼Œopenå°†æ˜¯<code>true</code>ã€‚åœ¨ç¬¬14è¡Œï¼Œ<code>n</code>çš„å€¼å°†æ˜¯<code>6</code>ï¼Œopenå†æ¬¡ä¸º<code>true</code>ã€‚æˆ‘ä»¬ç°åœ¨å·²ç»è¯»å–äº†é€šé“ä¸­çš„<code>5</code>å’Œ<code>6</code>ï¼Œæ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»ã€‚ç°åœ¨å½“åœ¨ç¬¬16è¡Œå†æ¬¡è¯»å–é€šé“æ—¶ï¼Œ<code>n</code>çš„å€¼å°†æ˜¯<code>0</code>ï¼Œè¿™æ˜¯<code>int</code>çš„é›¶å€¼ï¼Œ<code>open</code>å°†æ˜¯<code>false</code>ï¼Œè¡¨ç¤ºé€šé“å·²å…³é—­ã€‚</p>
<p>è¿™ä¸ªç¨‹åºå°†æ‰“å°ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">Received: 5, open: true
Received: 6, open: true
Received: 0, open: false</code></pre></div>

<p>åŒæ ·çš„ç¨‹åºä¹Ÿå¯ä»¥ä½¿ç”¨for rangeå¾ªç¯æ¥ç¼–å†™ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;fmt&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">5</span>)
	ch &lt;- <span class="hljs-number">5</span>
	ch &lt;- <span class="hljs-number">6</span>
	<span class="hljs-built_in">close</span>(ch)
	<span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> ch &#123;
		fmt.Println(<span class="hljs-string">&quot;Received:&quot;</span>, n)
	&#125;
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/xVgkn64Jado">Run program in playground</a></p>
<p>ä¸Šé¢ç¨‹åºç¬¬12è¡Œçš„<code>for range</code>å¾ªç¯å°†è¯»å–å†™å…¥é€šé“çš„æ‰€æœ‰å€¼ï¼Œå¹¶åœ¨æ²¡æœ‰æ›´å¤šå€¼å¯è¯»æ—¶é€€å‡ºï¼Œå› ä¸ºé€šé“å·²ç»å…³é—­ã€‚</p>
<p>è¿™ä¸ªç¨‹åºå°†æ‰“å°ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">Received: 5
Received: 6</code></pre></div>

<h3 id="é•¿åº¦ä¸å®¹é‡"><a href="#é•¿åº¦ä¸å®¹é‡" class="headerlink" title="é•¿åº¦ä¸å®¹é‡"></a>é•¿åº¦ä¸å®¹é‡</h3><p>ç¼“å†²é€šé“çš„å®¹é‡æ˜¯é€šé“å¯ä»¥å®¹çº³çš„å€¼çš„æ•°é‡ã€‚è¿™æ˜¯æˆ‘ä»¬ä½¿ç”¨<code>make</code>å‡½æ•°åˆ›å»ºç¼“å†²é€šé“æ—¶æŒ‡å®šçš„å€¼ã€‚</p>
<p>ç¼“å†²é€šé“çš„é•¿åº¦æ˜¯å½“å‰é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ•°é‡ã€‚</p>
<p>ä¸€ä¸ªç¨‹åºå¯ä»¥è®©äº‹æƒ…å˜å¾—æ¸…æ™° ğŸ˜€</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>, <span class="hljs-number">3</span>)
    ch &lt;- <span class="hljs-string">&quot;naveen&quot;</span>
    ch &lt;- <span class="hljs-string">&quot;paul&quot;</span>
    fmt.Println(<span class="hljs-string">&quot;capacity is&quot;</span>, <span class="hljs-built_in">cap</span>(ch))
    fmt.Println(<span class="hljs-string">&quot;length is&quot;</span>, <span class="hljs-built_in">len</span>(ch))
    fmt.Println(<span class="hljs-string">&quot;read value&quot;</span>, &lt;-ch)
    fmt.Println(<span class="hljs-string">&quot;new length is&quot;</span>, <span class="hljs-built_in">len</span>(ch))
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/2ggC64yyvr">Run program in playground</a></p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œé€šé“åˆ›å»ºæ—¶çš„å®¹é‡ä¸º<code>3</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥å®¹çº³3ä¸ªå­—ç¬¦ä¸²ã€‚ç„¶åæˆ‘ä»¬åœ¨ç¬¬9è¡Œå’Œç¬¬10è¡Œåˆ†åˆ«å‘é€šé“å†™å…¥2ä¸ªå­—ç¬¦ä¸²ã€‚ç°åœ¨é€šé“ä¸­æœ‰2ä¸ªå­—ç¬¦ä¸²æ’é˜Ÿï¼Œå› æ­¤å…¶é•¿åº¦ä¸º<code>2</code>ã€‚åœ¨ç¬¬13è¡Œï¼Œæˆ‘ä»¬ä»é€šé“è¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ç°åœ¨é€šé“ä¸­åªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²æ’é˜Ÿï¼Œå› æ­¤å…¶é•¿åº¦å˜ä¸º<code>1</code>ã€‚è¿™ä¸ªç¨‹åºå°†æ‰“å°ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">capacity is 3
length is 2
read value naveen
new length is 1</code></pre></div>

<h3 id="WaitGroup"><a href="#WaitGroup" class="headerlink" title="WaitGroup"></a>WaitGroup</h3><p>æœ¬æ•™ç¨‹çš„ä¸‹ä¸€èŠ‚æ˜¯å…³äº<em>Worker Pools</em>ã€‚ä¸ºäº†ç†è§£worker poolsï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£<code>WaitGroup</code>ï¼Œå› ä¸ºå®ƒå°†åœ¨Worker poolçš„å®ç°ä¸­ä½¿ç”¨ã€‚</p>
<p>WaitGroupç”¨äºç­‰å¾…ä¸€ç»„Goroutineså®Œæˆæ‰§è¡Œã€‚æ§åˆ¶ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æ‰€æœ‰Goroutineså®Œæˆæ‰§è¡Œã€‚å‡è®¾æˆ‘ä»¬æœ‰3ä¸ªä»<code>main</code> Goroutineç”Ÿæˆçš„å¹¶å‘æ‰§è¡Œçš„Goroutinesã€‚<code>main</code> Goroutineséœ€è¦ç­‰å¾…å…¶ä»–3ä¸ªGoroutineså®Œæˆæ‰èƒ½ç»ˆæ­¢ã€‚è¿™å¯ä»¥ä½¿ç”¨WaitGroupæ¥å®ç°ã€‚</p>
<p>è®©æˆ‘ä»¬åœæ­¢ç†è®ºï¼Œç›´æ¥å¼€å§‹ç¼–å†™ä»£ç  ğŸ˜€</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;fmt&quot;</span>
	<span class="hljs-string">&quot;sync&quot;</span>
	<span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">process</span><span class="hljs-params">(i <span class="hljs-type">int</span>, wg *sync.WaitGroup)</span></span> &#123;
	fmt.Println(<span class="hljs-string">&quot;started Goroutine &quot;</span>, i)
	time.Sleep(<span class="hljs-number">2</span> * time.Second)
	fmt.Printf(<span class="hljs-string">&quot;Goroutine %d ended\n&quot;</span>, i)
	wg.Done()
&#125;

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
	no := <span class="hljs-number">3</span>
	<span class="hljs-keyword">var</span> wg sync.WaitGroup
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; no; i++ &#123;
		wg.Add(<span class="hljs-number">1</span>)
		<span class="hljs-keyword">go</span> process(i, &amp;wg)
	&#125;
	wg.Wait()
	fmt.Println(<span class="hljs-string">&quot;All go routines finished executing&quot;</span>)
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/CZNtu8ktQh">Run in playground</a></p>
<p><a target="_blank" rel="noopener" href="https://golang.org/pkg/sync/#WaitGroup">WaitGroup</a>æ˜¯ä¸€ä¸ªç»“æ„ç±»å‹ï¼Œæˆ‘ä»¬åœ¨ç¬¬18è¡Œåˆ›å»ºäº†ä¸€ä¸ªWaitGroupç±»å‹çš„é›¶å€¼å˜é‡ã€‚WaitGroupçš„å·¥ä½œæ–¹å¼æ˜¯é€šè¿‡ä½¿ç”¨è®¡æ•°å™¨ã€‚å½“æˆ‘ä»¬å¯¹WaitGroupè°ƒç”¨<code>Add</code>å¹¶ä¼ é€’ä¸€ä¸ª<code>int</code>æ—¶ï¼ŒWaitGroupçš„è®¡æ•°å™¨ä¼šå¢åŠ ä¼ é€’ç»™<code>Add</code>çš„å€¼ã€‚å‡å°‘è®¡æ•°å™¨çš„æ–¹æ³•æ˜¯åœ¨WaitGroupä¸Šè°ƒç”¨<code>Done()</code>æ–¹æ³•ã€‚<code>Wait()</code>æ–¹æ³•ä¼šé˜»å¡è°ƒç”¨å®ƒçš„<code>Goroutine</code>ï¼Œç›´åˆ°è®¡æ•°å™¨å˜ä¸ºé›¶ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬åœ¨ç¬¬20è¡Œçš„<code>for</code>å¾ªç¯å†…è°ƒç”¨<code>wg.Add(1)</code>ï¼Œå¾ªç¯è¿­ä»£3æ¬¡ã€‚æ‰€ä»¥è®¡æ•°å™¨ç°åœ¨å˜æˆ3ã€‚<code>for</code>å¾ªç¯è¿˜ç”Ÿæˆäº†3ä¸ª<code>process</code> Goroutinesï¼Œç„¶ååœ¨ç¬¬23è¡Œè°ƒç”¨çš„<code>wg.Wait()</code>ä½¿<code>main</code> Goroutineç­‰å¾…ï¼Œç›´åˆ°è®¡æ•°å™¨å˜ä¸ºé›¶ã€‚è®¡æ•°å™¨é€šè¿‡åœ¨<code>process</code> Goroutineä¸­ç¬¬13è¡Œè°ƒç”¨<code>wg.Done</code>æ¥é€’å‡ã€‚ä¸€æ—¦æ‰€æœ‰3ä¸ªç”Ÿæˆçš„Goroutineså®Œæˆæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯<code>wg.Done()</code>è¢«è°ƒç”¨ä¸‰æ¬¡ï¼Œè®¡æ•°å™¨å°†å˜ä¸ºé›¶ï¼Œmain Goroutineå°†è¢«è§£é™¤é˜»å¡ã€‚</p>
<p><strong>åœ¨ç¬¬21è¡Œä¼ é€’<code>wg</code>çš„æŒ‡é’ˆå¾ˆé‡è¦ã€‚å¦‚æœä¸ä¼ é€’æŒ‡é’ˆï¼Œé‚£ä¹ˆæ¯ä¸ªGoroutineå°†æœ‰è‡ªå·±çš„WaitGroupå‰¯æœ¬ï¼Œå¹¶ä¸”mainä¸ä¼šåœ¨å®ƒä»¬å®Œæˆæ‰§è¡Œæ—¶å¾—åˆ°é€šçŸ¥ã€‚</strong></p>
<p>è¿™ä¸ªç¨‹åºè¾“å‡ºï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">started Goroutine  2
started Goroutine  0
started Goroutine  1
Goroutine 0 ended
Goroutine 2 ended
Goroutine 1 ended
All go routines finished executing</code></pre></div>

<p>ä½ çš„è¾“å‡ºå¯èƒ½ä¸æˆ‘çš„ä¸åŒï¼Œå› ä¸ºGoroutinesçš„æ‰§è¡Œé¡ºåºå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ :)ã€‚</p>
<h3 id="Worker-Pool-å®ç°"><a href="#Worker-Pool-å®ç°" class="headerlink" title="Worker Pool å®ç°"></a>Worker Pool å®ç°</h3><p>ç¼“å†²é€šé“çš„ä¸€ä¸ªé‡è¦ç”¨é€”æ˜¯å®ç°<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Thread_pool">worker pool</a>ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œworker poolæ˜¯ç­‰å¾…åˆ†é…ä»»åŠ¡çš„çº¿ç¨‹é›†åˆã€‚ä¸€æ—¦ä»–ä»¬å®Œæˆåˆ†é…çš„ä»»åŠ¡ï¼Œå°±ä¼šå†æ¬¡å˜å¾—å¯ç”¨äºä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ç¼“å†²é€šé“æ¥å®ç°worker poolã€‚æˆ‘ä»¬çš„worker poolå°†æ‰§è¡Œæ‰¾å‡ºè¾“å…¥æ•°å­—çš„å„ä½æ•°å­—ä¹‹å’Œçš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¼ å…¥234ï¼Œè¾“å‡ºå°†æ˜¯9ï¼ˆ2 + 3 + 4ï¼‰ã€‚worker poolçš„è¾“å…¥å°†æ˜¯ä¸€ä¸ªä¼ªéšæœºæ•´æ•°åˆ—è¡¨ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬worker poolçš„æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªç›‘å¬è¾“å…¥ç¼“å†²é€šé“çš„Goroutineæ± ï¼Œç­‰å¾…åˆ†é…ä»»åŠ¡</li>
<li>å‘è¾“å…¥ç¼“å†²é€šé“æ·»åŠ ä»»åŠ¡</li>
<li>ä»»åŠ¡å®Œæˆåå°†ç»“æœå†™å…¥è¾“å‡ºç¼“å†²é€šé“</li>
<li>ä»è¾“å‡ºç¼“å†²é€šé“è¯»å–å¹¶æ‰“å°ç»“æœ</li>
</ul>
<p>æˆ‘ä»¬å°†é€æ­¥ç¼–å†™è¿™ä¸ªç¨‹åºï¼Œä»¥ä½¿å…¶æ›´å®¹æ˜“ç†è§£ã€‚</p>
<p>ç¬¬ä¸€æ­¥å°†æ˜¯åˆ›å»ºè¡¨ç¤ºä»»åŠ¡å’Œç»“æœçš„ç»“æ„ä½“ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs fallback">type Job struct &#123;
    id       int
    randomno int
&#125;
type Result struct &#123;
    job         Job
    sumofdigits int
&#125;</code></pre></div>

<p>æ¯ä¸ª<code>Job</code>ç»“æ„ä½“éƒ½æœ‰ä¸€ä¸ª<code>id</code>å’Œä¸€ä¸ªéœ€è¦è®¡ç®—å„ä½æ•°å­—ä¹‹å’Œçš„<code>randomno</code>ã€‚</p>
<p><code>Result</code>ç»“æ„ä½“æœ‰ä¸€ä¸ª<code>job</code>å­—æ®µï¼Œå®ƒæ˜¯æŒæœ‰ç»“æœï¼ˆå„ä½æ•°å­—ä¹‹å’Œï¼‰çš„ä»»åŠ¡ï¼Œç»“æœå­˜å‚¨åœ¨<code>sumofdigits</code>å­—æ®µä¸­ã€‚</p>
<p>ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºç”¨äºæ¥æ”¶ä»»åŠ¡å’Œå†™å…¥è¾“å‡ºçš„ç¼“å†²é€šé“ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs fallback">var jobs = make(chan Job, 10)
var results = make(chan Result, 10)</code></pre></div>

<p>Worker Goroutinesç›‘å¬<code>jobs</code>ç¼“å†²é€šé“ç­‰å¾…æ–°ä»»åŠ¡ã€‚ä¸€æ—¦ä»»åŠ¡å®Œæˆï¼Œç»“æœå°±ä¼šå†™å…¥<code>results</code>ç¼“å†²é€šé“ã€‚</p>
<p>ä¸‹é¢çš„<code>digits</code>å‡½æ•°å®é™…æ‰§è¡Œæ‰¾å‡ºæ•´æ•°å„ä½æ•°å­—ä¹‹å’Œå¹¶è¿”å›çš„ä»»åŠ¡ã€‚æˆ‘ä»¬å°†åœ¨è¿™ä¸ªå‡½æ•°ä¸­æ·»åŠ 2ç§’çš„ä¼‘çœ ï¼Œåªæ˜¯ä¸ºäº†æ¨¡æ‹Ÿè¿™ä¸ªå‡½æ•°éœ€è¦ä¸€äº›æ—¶é—´æ¥è®¡ç®—ç»“æœã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">digits</span><span class="hljs-params">(number <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;
    sum := <span class="hljs-number">0</span>
    no := number
    <span class="hljs-keyword">for</span> no != <span class="hljs-number">0</span> &#123;
        digit := no % <span class="hljs-number">10</span>
        sum += digit
        no /= <span class="hljs-number">10</span>
    &#125;
    time.Sleep(<span class="hljs-number">2</span> * time.Second)
    <span class="hljs-keyword">return</span> sum
&#125;</code></pre></div>

<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªåˆ›å»ºworker Goroutineçš„å‡½æ•°ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">worker</span><span class="hljs-params">(wg *sync.WaitGroup)</span></span> &#123;
    <span class="hljs-keyword">for</span> job := <span class="hljs-keyword">range</span> jobs &#123;
        output := Result&#123;job, digits(job.randomno)&#125;
        results &lt;- output
    &#125;
    wg.Done()
&#125;</code></pre></div>

<p>ä¸Šé¢çš„å‡½æ•°åˆ›å»ºä¸€ä¸ªworkerï¼Œå®ƒä»<code>jobs</code>é€šé“è¯»å–ï¼Œä½¿ç”¨å½“å‰çš„<code>job</code>å’Œ<code>digits</code>å‡½æ•°çš„è¿”å›å€¼åˆ›å»ºä¸€ä¸ª<code>Result</code>ç»“æ„ä½“ï¼Œç„¶åå°†ç»“æœå†™å…¥<code>results</code>ç¼“å†²é€šé“ã€‚è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªWaitGroup <code>wg</code>ä½œä¸ºå‚æ•°ï¼Œå½“æ‰€æœ‰<code>jobs</code>å®Œæˆæ—¶ï¼Œå®ƒå°†åœ¨è¯¥å‚æ•°ä¸Šè°ƒç”¨<code>Done()</code>æ–¹æ³•ã€‚</p>
<p><code>createWorkerPool</code>å‡½æ•°å°†åˆ›å»ºä¸€ä¸ªworker Goroutineæ± ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createWorkerPool</span><span class="hljs-params">(noOfWorkers <span class="hljs-type">int</span>)</span></span> &#123;
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; noOfWorkers; i++ &#123;
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> worker(&amp;wg)
    &#125;
    wg.Wait()
    <span class="hljs-built_in">close</span>(results)
&#125;</code></pre></div>

<p>ä¸Šé¢çš„å‡½æ•°æ¥å—è¦åˆ›å»ºçš„workersæ•°é‡ä½œä¸ºå‚æ•°ã€‚åœ¨åˆ›å»ºGoroutineä¹‹å‰è°ƒç”¨<code>wg.Add(1)</code>æ¥å¢åŠ WaitGroupè®¡æ•°å™¨ã€‚ç„¶åé€šè¿‡å°†WaitGroup <code>wg</code>çš„æŒ‡é’ˆä¼ é€’ç»™<code>worker</code>å‡½æ•°æ¥åˆ›å»ºworker Goroutinesã€‚åˆ›å»ºå®Œæ‰€éœ€çš„worker Goroutinesåï¼Œå®ƒé€šè¿‡è°ƒç”¨<code>wg.Wait()</code>ç­‰å¾…æ‰€æœ‰Goroutineså®Œæˆæ‰§è¡Œã€‚åœ¨æ‰€æœ‰Goroutineså®Œæˆæ‰§è¡Œåï¼Œå®ƒå…³é—­<code>results</code>é€šé“ï¼Œå› ä¸ºæ‰€æœ‰Goroutineséƒ½å·²å®Œæˆæ‰§è¡Œï¼Œæ²¡æœ‰äººä¼šè¿›ä¸€æ­¥å†™å…¥<code>results</code>é€šé“ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½worker poolï¼Œè®©æˆ‘ä»¬ç»§ç»­ç¼–å†™å°†ä»»åŠ¡åˆ†é…ç»™workersçš„å‡½æ•°ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">allocate</span><span class="hljs-params">(noOfJobs <span class="hljs-type">int</span>)</span></span> &#123;
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; noOfJobs; i++ &#123;
        randomno := rand.Intn(<span class="hljs-number">999</span>)
        job := Job&#123;i, randomno&#125;
        jobs &lt;- job
    &#125;
    <span class="hljs-built_in">close</span>(jobs)
&#125;</code></pre></div>

<p>ä¸Šé¢çš„<code>allocate</code>å‡½æ•°æ¥å—è¦åˆ›å»ºçš„ä»»åŠ¡æ•°é‡ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œç”Ÿæˆæœ€å¤§å€¼ä¸º<code>998</code>çš„ä¼ªéšæœºæ•°ï¼Œä½¿ç”¨éšæœºæ•°å’Œforå¾ªç¯è®¡æ•°å™¨<code>i</code>ä½œä¸ºidåˆ›å»º<code>Job</code>ç»“æ„ä½“ï¼Œç„¶åå°†å®ƒä»¬å†™å…¥<code>jobs</code>é€šé“ã€‚å†™å…¥æ‰€æœ‰ä»»åŠ¡åå…³é—­<code>jobs</code>é€šé“ã€‚</p>
<p>ä¸‹ä¸€æ­¥å°†æ˜¯åˆ›å»ºè¯»å–<code>results</code>é€šé“å¹¶æ‰“å°è¾“å‡ºçš„å‡½æ•°ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">result</span><span class="hljs-params">(done <span class="hljs-keyword">chan</span> <span class="hljs-type">bool</span>)</span></span> &#123;
    <span class="hljs-keyword">for</span> result := <span class="hljs-keyword">range</span> results &#123;
        fmt.Printf(<span class="hljs-string">&quot;Job id %d, input random no %d , sum of digits %d\n&quot;</span>, result.job.id, result.job.randomno, result.sumofdigits)
    &#125;
    done &lt;- <span class="hljs-literal">true</span>
&#125;</code></pre></div>

<p><code>result</code>å‡½æ•°è¯»å–<code>results</code>é€šé“å¹¶æ‰“å°ä»»åŠ¡idã€è¾“å…¥éšæœºæ•°å’Œéšæœºæ•°çš„å„ä½æ•°å­—ä¹‹å’Œã€‚resultå‡½æ•°è¿˜æ¥å—ä¸€ä¸ª<code>done</code>é€šé“ä½œä¸ºå‚æ•°ï¼Œä¸€æ—¦æ‰“å°å®Œæ‰€æœ‰ç»“æœå°±å‘è¯¥é€šé“å†™å…¥ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å°±ç»ªã€‚è®©æˆ‘ä»¬ç»§ç»­æœ€åä¸€æ­¥ï¼Œä»<code>main()</code>å‡½æ•°è°ƒç”¨æ‰€æœ‰è¿™äº›å‡½æ•°ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    startTime := time.Now()
    noOfJobs := <span class="hljs-number">100</span>
    <span class="hljs-keyword">go</span> allocate(noOfJobs)
    done := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">bool</span>)
    <span class="hljs-keyword">go</span> result(done)
    noOfWorkers := <span class="hljs-number">10</span>
    createWorkerPool(noOfWorkers)
    &lt;-done
    endTime := time.Now()
    diff := endTime.Sub(startTime)
    fmt.Println(<span class="hljs-string">&quot;total time taken &quot;</span>, diff.Seconds(), <span class="hljs-string">&quot;seconds&quot;</span>)
&#125;</code></pre></div>

<p>æˆ‘ä»¬é¦–å…ˆåœ¨mainå‡½æ•°çš„ç¬¬2è¡Œå­˜å‚¨ç¨‹åºçš„æ‰§è¡Œå¼€å§‹æ—¶é—´ï¼Œåœ¨æœ€åä¸€è¡Œï¼ˆç¬¬12è¡Œï¼‰æˆ‘ä»¬è®¡ç®—endTimeå’ŒstartTimeä¹‹é—´çš„æ—¶é—´å·®ï¼Œå¹¶æ˜¾ç¤ºç¨‹åºè¿è¡Œæ‰€éœ€çš„æ€»æ—¶é—´ã€‚è¿™æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºæˆ‘ä»¬å°†é€šè¿‡æ”¹å˜Goroutinesçš„æ•°é‡æ¥åšä¸€äº›åŸºå‡†æµ‹è¯•ã€‚</p>
<p><code>noOfJobs</code>è®¾ç½®ä¸º100ï¼Œç„¶åè°ƒç”¨<code>allocate</code>å‘<code>jobs</code>é€šé“æ·»åŠ ä»»åŠ¡ã€‚</p>
<p>ç„¶ååˆ›å»º<code>done</code>é€šé“å¹¶ä¼ é€’ç»™<code>result</code> Goroutineï¼Œè¿™æ ·å®ƒå°±å¯ä»¥å¼€å§‹æ‰“å°è¾“å‡ºå¹¶åœ¨ä¸€åˆ‡éƒ½æ‰“å°å®Œæˆæ—¶é€šçŸ¥ã€‚</p>
<p>æœ€åé€šè¿‡è°ƒç”¨<code>createWorkerPool</code>å‡½æ•°åˆ›å»ºä¸€ä¸ªåŒ…å«<code>10</code>ä¸ªworker Goroutinesçš„æ± ï¼Œç„¶åmainåœ¨<code>done</code>é€šé“ä¸Šç­‰å¾…æ‰€æœ‰ç»“æœæ‰“å°å®Œæˆã€‚</p>
<p>è¿™æ˜¯å®Œæ•´çš„ç¨‹åºä¾›ä½ å‚è€ƒã€‚æˆ‘ä¹Ÿå¯¼å…¥äº†å¿…è¦çš„åŒ…ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;math/rand&quot;</span>
    <span class="hljs-string">&quot;sync&quot;</span>
    <span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-keyword">type</span> Job <span class="hljs-keyword">struct</span> &#123;
    id       <span class="hljs-type">int</span>
    randomno <span class="hljs-type">int</span>
&#125;
<span class="hljs-keyword">type</span> Result <span class="hljs-keyword">struct</span> &#123;
    job         Job
    sumofdigits <span class="hljs-type">int</span>
&#125;

<span class="hljs-keyword">var</span> jobs = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> Job, <span class="hljs-number">10</span>)
<span class="hljs-keyword">var</span> results = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> Result, <span class="hljs-number">10</span>)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">digits</span><span class="hljs-params">(number <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;
    sum := <span class="hljs-number">0</span>
    no := number
    <span class="hljs-keyword">for</span> no != <span class="hljs-number">0</span> &#123;
        digit := no % <span class="hljs-number">10</span>
        sum += digit
        no /= <span class="hljs-number">10</span>
    &#125;
    time.Sleep(<span class="hljs-number">2</span> * time.Second)
    <span class="hljs-keyword">return</span> sum
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">worker</span><span class="hljs-params">(wg *sync.WaitGroup)</span></span> &#123;
    <span class="hljs-keyword">for</span> job := <span class="hljs-keyword">range</span> jobs &#123;
        output := Result&#123;job, digits(job.randomno)&#125;
        results &lt;- output
    &#125;
    wg.Done()
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createWorkerPool</span><span class="hljs-params">(noOfWorkers <span class="hljs-type">int</span>)</span></span> &#123;
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; noOfWorkers; i++ &#123;
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> worker(&amp;wg)
    &#125;
    wg.Wait()
    <span class="hljs-built_in">close</span>(results)
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">allocate</span><span class="hljs-params">(noOfJobs <span class="hljs-type">int</span>)</span></span> &#123;
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; noOfJobs; i++ &#123;
        randomno := rand.Intn(<span class="hljs-number">999</span>)
        job := Job&#123;i, randomno&#125;
        jobs &lt;- job
    &#125;
    <span class="hljs-built_in">close</span>(jobs)
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">result</span><span class="hljs-params">(done <span class="hljs-keyword">chan</span> <span class="hljs-type">bool</span>)</span></span> &#123;
    <span class="hljs-keyword">for</span> result := <span class="hljs-keyword">range</span> results &#123;
        fmt.Printf(<span class="hljs-string">&quot;Job id %d, input random no %d , sum of digits %d\n&quot;</span>, result.job.id, result.job.randomno, result.sumofdigits)
    &#125;
    done &lt;- <span class="hljs-literal">true</span>
&#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    startTime := time.Now()
    noOfJobs := <span class="hljs-number">100</span>
    <span class="hljs-keyword">go</span> allocate(noOfJobs)
    done := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">bool</span>)
    <span class="hljs-keyword">go</span> result(done)
    noOfWorkers := <span class="hljs-number">10</span>
    createWorkerPool(noOfWorkers)
    &lt;-done
    endTime := time.Now()
    diff := endTime.Sub(startTime)
    fmt.Println(<span class="hljs-string">&quot;total time taken &quot;</span>, diff.Seconds(), <span class="hljs-string">&quot;seconds&quot;</span>)
&#125;</code></pre></div>

<p><a target="_blank" rel="noopener" href="https://play.golang.org/p/au5islUIbx">Run in playground</a></p>
<p>è¯·åœ¨æœ¬åœ°æœºå™¨ä¸Šè¿è¡Œæ­¤ç¨‹åºä»¥è·å¾—æ›´å‡†ç¡®çš„æ€»æ—¶é—´è®¡ç®—ã€‚</p>
<p>è¿™ä¸ªç¨‹åºå°†æ‰“å°ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">Job id 1, input random no 636, sum of digits 15
Job id 0, input random no 878, sum of digits 23
Job id 9, input random no 150, sum of digits 6
...
total time taken  20.01081009 seconds</code></pre></div>

<p>å°†æ‰“å°æ€»å…±100è¡Œï¼Œå¯¹åº”100ä¸ªä»»åŠ¡ï¼Œç„¶åæœ€åä¸€è¡Œæ‰“å°ç¨‹åºè¿è¡Œçš„æ€»æ—¶é—´ã€‚ä½ çš„è¾“å‡ºä¼šä¸æˆ‘çš„ä¸åŒï¼Œå› ä¸ºGoroutineså¯ä»¥ä»¥ä»»ä½•é¡ºåºè¿è¡Œï¼Œæ€»æ—¶é—´ä¹Ÿä¼šæ ¹æ®ç¡¬ä»¶è€Œå˜åŒ–ã€‚åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œç¨‹åºå®Œæˆå¤§çº¦éœ€è¦20ç§’ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬å°†<code>main</code>å‡½æ•°ä¸­çš„<code>noOfWorkers</code>å¢åŠ åˆ°<code>20</code>ã€‚æˆ‘ä»¬å·²ç»å°†workersçš„æ•°é‡ç¿»å€äº†ã€‚ç”±äºworker Goroutineså¢åŠ äº†ï¼ˆå‡†ç¡®åœ°è¯´æ˜¯ç¿»å€ï¼‰ï¼Œç¨‹åºå®Œæˆæ‰€éœ€çš„æ€»æ—¶é—´åº”è¯¥å‡å°‘ï¼ˆå‡†ç¡®åœ°è¯´æ˜¯å‡åŠï¼‰ã€‚åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œå®ƒå˜æˆäº†10.004364685ç§’ï¼Œç¨‹åºæ‰“å°ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs fallback">...
total time taken  10.004364685 seconds</code></pre></div>

<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç†è§£ï¼Œéšç€worker Goroutinesæ•°é‡çš„å¢åŠ ï¼Œå®Œæˆä»»åŠ¡æ‰€éœ€çš„æ€»æ—¶é—´ä¼šå‡å°‘ã€‚æˆ‘æŠŠå®ƒä½œä¸ºä¸€ä¸ªç»ƒä¹ ç•™ç»™ä½ ï¼Œåœ¨<code>main</code>å‡½æ•°ä¸­å°†<code>noOfJobs</code>å’Œ<code>noOfWorkers</code>è®¾ç½®ä¸ºä¸åŒçš„å€¼å¹¶åˆ†æç»“æœã€‚</p>
<p><strong>ä¸‹ä¸€æ•™ç¨‹ - <a href="../%E3%80%90GolangBot%E3%80%9124-Select">Select</a></strong></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/" class="category-chain-item">å­¦ä¹ å¿ƒå¾—</a>
  
  
    <span>></span>
    
  <a href="/categories/%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/GolangBot/" class="category-chain-item">GolangBot</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Golang/" class="print-no-link">#Golang</a>
      
        <a href="/tags/%E6%95%99%E7%A8%8B/" class="print-no-link">#æ•™ç¨‹</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>ã€GolangBotã€‘23-ç¼“å†²é€šé“ä¸å·¥ä½œæ± </div>
      <div>https://zoekyhein.github.io/ã€GolangBotã€‘23-ç¼“å†²é€šé“ä¸å·¥ä½œæ± /</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>ZoeKyHein</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2024å¹´12æœˆ25æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/%E3%80%90GolangBot%E3%80%9124-Select/" title="ã€GolangBotã€‘24-Select">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ã€GolangBotã€‘24-Select</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/%E3%80%90GolangBot%E3%80%9122-Channels/" title="ã€GolangBotã€‘22-Channels">
                        <span class="hidden-mobile">ã€GolangBotã€‘22-Channels</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
